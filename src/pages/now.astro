---
import Layout from "@/layouts/Layout.astro";
import { getEntry } from "astro:content";

// Get the now page content
const nowPage = await getEntry("pages", "now");

if (!nowPage) {
  throw new Error("Now page not found");
}

const { Content } = await nowPage.render();
const { title, description, lastUpdated } = nowPage.data;

// Format date helper
function formatDate(date: Date) {
  return date.toLocaleDateString("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
  });
}
---

<Layout title={`${title} | Joseph`} description={description}>
  <div class="px-4 py-24 mx-auto max-w-4xl">
    <article class="prose dark:prose-invert max-w-none">
      <Content />

      {lastUpdated && (
        <p class="text-sm text-muted-foreground italic mt-8">
          Last updated: {formatDate(lastUpdated)}
        </p>
      )}
    </article>
  </div>
</Layout>
