---
import Layout from "@/layouts/Layout.astro";
import { Button } from "@/components/ui/button";
import { RiMailLine, RiTwitterXLine, RiGithubLine } from "@remixicon/react";
import { Linkedin } from "lucide-react";

const title = "Contact - Joseph Ju";
const description =
  "Get in touch with me for collaborations, projects, or just to say hello.";
---

<Layout title={title} description={description}>
  <div class="container px-4 py-24 mx-auto max-w-4xl">
    <div class="text-center mb-12">
      <h1 class="text-4xl font-bold mb-4">Get in Touch</h1>
      <p class="text-lg text-muted-foreground">
        Have a project in mind? Want to collaborate? Or just want to say hello?
        <br />
        I'd love to hear from you.
      </p>
    </div>

    <div class="grid md:grid-cols-2 gap-12">
      {/* Contact Form */}
      <div>
        <h2 class="text-2xl font-semibold mb-6">Send a Message</h2>

        {
          /*
          Using Cloudflare Pages Static Forms Plugin
          Form submissions are handled by /functions/contact.ts
          No action or method needed - the plugin intercepts automatically
        */
        }
        <form data-static-form-name="contact" class="space-y-6">
          <div>
            <label for="name" class="block text-sm font-medium mb-2">
              Name
            </label>
            <input
              type="text"
              id="name"
              name="name"
              required
              class="w-full px-4 py-2 border border-border rounded-md bg-background focus:ring-2 focus:ring-primary focus:border-transparent"
              placeholder="Your name"
            />
          </div>

          <div>
            <label for="email" class="block text-sm font-medium mb-2">
              Email
            </label>
            <input
              type="email"
              id="email"
              name="email"
              required
              class="w-full px-4 py-2 border border-border rounded-md bg-background focus:ring-2 focus:ring-primary focus:border-transparent"
              placeholder="your@email.com"
            />
          </div>

          <div>
            <label for="message" class="block text-sm font-medium mb-2">
              Message
            </label>
            <textarea
              id="message"
              name="message"
              required
              rows="6"
              class="w-full px-4 py-2 border border-border rounded-md bg-background focus:ring-2 focus:ring-primary focus:border-transparent resize-none"
              placeholder="Tell me about your project or idea..."></textarea>
          </div>

          <div id="form-status" class="hidden">
            <div
              id="form-success"
              class="hidden p-4 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-100 rounded-md"
            >
              Message sent successfully! I'll get back to you soon.
            </div>
            <div
              id="form-error"
              class="hidden p-4 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-100 rounded-md"
            >
              Something went wrong. Please try again or email me directly.
            </div>
          </div>

          <Button type="submit" class="w-full" id="submit-button">
            Send Message
          </Button>
        </form>

        <script>
          const form = document.querySelector(
            '[data-static-form-name="contact"]'
          ) as HTMLFormElement;
          const submitButton = document.getElementById("submit-button");
          const formStatus = document.getElementById("form-status");
          const formSuccess = document.getElementById("form-success");
          const formError = document.getElementById("form-error");

          form?.addEventListener("submit", async (e) => {
            e.preventDefault();

            // Disable submit button
            if (submitButton) {
              submitButton.textContent = "Sending...";
              submitButton.setAttribute("disabled", "true");
            }

            try {
              const formData = new FormData(form);
              const response = await fetch("/contact", {
                method: "POST",
                body: formData,
              });

              if (response.ok) {
                // Show success message
                formStatus?.classList.remove("hidden");
                formSuccess?.classList.remove("hidden");
                formError?.classList.add("hidden");
                form.reset();
              } else {
                throw new Error("Form submission failed");
              }
            } catch (error) {
              // Show error message
              formStatus?.classList.remove("hidden");
              formError?.classList.remove("hidden");
              formSuccess?.classList.add("hidden");
            } finally {
              // Re-enable submit button
              if (submitButton) {
                submitButton.textContent = "Send Message";
                submitButton.removeAttribute("disabled");
              }
            }
          });
        </script>
      </div>

      {/* Other Contact Methods */}
      <div>
        <h2 class="text-2xl font-semibold mb-6">Other Ways to Connect</h2>

        <div class="space-y-4">
          <a
            href="mailto:contact@heyjoseph.me"
            class="flex items-center gap-3 p-4 border border-border rounded-md hover:bg-accent transition-colors group"
          >
            <RiMailLine
              className="w-5 h-5 text-muted-foreground group-hover:text-primary"
            />
            <div>
              <div class="font-medium">Email</div>
              <div class="text-sm text-muted-foreground">
                contact@heyjoseph.me
              </div>
            </div>
          </a>

          <a
            href="https://x.com/heyjosephme"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-3 p-4 border border-border rounded-md hover:bg-accent transition-colors group"
          >
            <RiTwitterXLine
              className="w-5 h-5 text-muted-foreground group-hover:text-primary"
            />
            <div>
              <div class="font-medium">Twitter / X</div>
              <div class="text-sm text-muted-foreground">@heyjosephme</div>
            </div>
          </a>

          <a
            href="https://github.com/heyjosephme"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-3 p-4 border border-border rounded-md hover:bg-accent transition-colors group"
          >
            <RiGithubLine
              className="w-5 h-5 text-muted-foreground group-hover:text-primary"
            />
            <div>
              <div class="font-medium">GitHub</div>
              <div class="text-sm text-muted-foreground">@heyjosephme</div>
            </div>
          </a>

          <a
            href="https://www.linkedin.com/in/tokyojoseph/"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-3 p-4 border border-border rounded-md hover:bg-accent transition-colors group"
          >
            <Linkedin
              className="w-5 h-5 text-muted-foreground group-hover:text-primary"
              client:load
            />
            <div>
              <div class="font-medium">LinkedIn</div>
              <div class="text-sm text-muted-foreground">/in/tokyojoseph</div>
            </div>
          </a>
        </div>

        <div class="mt-8 p-4 bg-muted rounded-md">
          <p class="text-sm text-muted-foreground">
            <strong class="text-foreground">Response Time:</strong> I typically respond
            within 24-48 hours. For urgent matters, email is the fastest way to reach
            me.
          </p>
        </div>
      </div>
    </div>
  </div>
</Layout>
